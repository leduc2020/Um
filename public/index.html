<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Công cụ upload và convert ảnh/video/GIF miễn phí, hỗ trợ nhiều định dạng, chuyển đổi hàng loạt link media dễ dàng">
  <meta name="keywords" content="upload ảnh, convert video, chuyển đổi GIF, công cụ media, miễn phí">
  <title>Upload File</title>
  <link rel="icon" href="https://files.catbox.moe/55h8ek.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      color: #333;
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      padding: 30px 0;
      color: white;
    }
    
    header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    header p {
      font-size: 1.2rem;
      max-width: 700px;
      margin: 0 auto;
      opacity: 0.9;
    }
    
    .card {
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      overflow: hidden;
      margin-bottom: 30px;
    }
    
    .card-header {
      background: #4a69bd;
      color: white;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .card-header i {
      font-size: 1.5rem;
    }
    
    .card-body {
      padding: 30px;
    }
    
    .upload-area {
      border: 3px dashed #4a69bd;
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      background: #f8f9ff;
      transition: all 0.3s;
      cursor: pointer;
      margin-bottom: 20px;
    }
    
    .upload-area:hover, .upload-area.dragover {
      background: #e6eeff;
      border-color: #1e40af;
    }
    
    .upload-area i {
      font-size: 4rem;
      color: #4a69bd;
      margin-bottom: 15px;
    }
    
    .upload-area h3 {
      margin-bottom: 10px;
      color: #1e3a8a;
    }
    
    .upload-area p {
      color: #64748b;
      margin-bottom: 20px;
    }
    
    .file-formats {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }
    
    .format-tag {
      background: rgba(74, 105, 189, 0.1);
      color: #4a69bd;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    .btn {
      background: #4a69bd;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn:hover {
      background: #1e40af;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    
    .btn i {
      font-size: 1.1rem;
    }
    
    .file-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .file-item {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }
    
    .file-thumb {
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f1f5f9;
    }
    
    .file-thumb img, .file-thumb video {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    
    .file-info {
      padding: 10px;
      background: white;
      font-size: 0.85rem;
    }
    
    .file-name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .file-size {
      color: #64748b;
      font-size: 0.8rem;
    }
    
    .file-type {
      font-size: 0.7rem;
      background: #e2e8f0;
      padding: 2px 5px;
      border-radius: 3px;
      display: inline-block;
    }
    
    .remove-file {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255,255,255,0.8);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #ef4444;
      font-size: 0.9rem;
    }
    
    textarea {
      width: 100%;
      height: 150px;
      padding: 15px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-family: monospace;
      font-size: 1rem;
      resize: vertical;
      margin-bottom: 15px;
    }
    
    textarea:focus {
      outline: none;
      border-color: #4a69bd;
    }
    
    .result-container {
      position: relative;
    }
    
    .result-area {
      margin-top: 20px;
      background: #f1f5f9;
      border-radius: 8px;
      padding: 20px;
      font-family: monospace;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .result-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 5px;
    }
    
    .copy-btn, .download-btn {
      background: rgba(255,255,255,0.9);
      border: none;
      border-radius: 4px;
      padding: 5px 10px;
      font-size: 0.8rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      color: #4a69bd;
      transition: all 0.2s;
    }
    
    .copy-btn:hover, .download-btn:hover {
      background: #4a69bd;
      color: white;
    }
    
    .actions {
      display: flex;
      gap: 15px;
      margin-top: 15px;
    }
    
    .btn-secondary {
      background: #94a3b8;
    }
    
    .btn-secondary:hover {
      background: #64748b;
    }
    
    .btn-success {
      background: #10b981;
    }
    
    .btn-success:hover {
      background: #059669;
    }
    
    .progress-container {
      margin-top: 20px;
      background: #e2e8f0;
      border-radius: 8px;
      height: 10px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: #4a69bd;
      width: 0%;
      transition: width 0.3s;
    }
    
    .status {
      text-align: center;
      margin: 15px 0;
      font-weight: 500;
      color: #4a69bd;
      min-height: 24px;
    }
    
    .tab-container {
      display: flex;
      margin-bottom: 20px;
      background: #f1f5f9;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .tab {
      flex: 1;
      text-align: center;
      padding: 15px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .tab.active {
      background: #4a69bd;
      color: white;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .instructions {
      background: #fff9db;
      border-left: 4px solid #f59f00;
      padding: 15px;
      border-radius: 0 8px 8px 0;
      margin: 20px 0;
    }
    
    .instructions h3 {
      margin-bottom: 10px;
      color: #d97706;
    }
    
    .instructions ul {
      padding-left: 20px;
    }
    
    .instructions li {
      margin-bottom: 8px;
    }
    
    @media (max-width: 768px) {
      .card-body {
        padding: 20px;
      }
      
      .file-list {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      
      header h1 {
        font-size: 2rem;
      }
      
      .result-actions {
        flex-direction: column;
      }
      
      .file-formats {
        gap: 5px;
      }
      
      .format-tag {
        font-size: 0.7rem;
        padding: 3px 8px;
      }
    }
    .btn {
  padding: 6px 12px;
  font-size: 14px;
  
  background-color: #4285f4;
  color: white;
  border: none;
  border-radius: 4px;
  
  transition: all 0.3s ease;
  cursor: pointer;
  
  display: inline-flex;
  align-items: center;
  justify-content: center;
  
  gap: 6px;
  
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.btn:hover {
  background-color: #3367d6;
  transform: translateY(2px); 
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); 
}

.btn:active {
  transform: translateY(4px);
  box-shadow: none;
}

.btn i {
  font-size: 12px;
}
#selectFiles {
transform: translateY(20px);
}
#announcementBanner {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 800px;
  z-index: 10000;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
}
#announcementBanner {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 600px;
    z-index: 10000;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    border-radius: 10px;
    padding: 20px;
    display: none;
    text-align: center;
  }

  .announcement-normal {
    background-color: #4CAF50; 
    color: rgb(0, 0, 0);
  }

  .announcement-warning {
    background-color: #FFC107; 
    color: black;
  }

  .announcement-urgent {
    background-color: #F44336; 
    color: rgb(0, 0, 0);
  }

  .announcement-icon {
    font-size: 24px;
    margin-right: 10px;
  }
  .announcement-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease-out;
  backdrop-filter: blur(5px);
}

.announcement-modal.active {
  opacity: 1;
  visibility: visible;
}

.announcement-card {
  width: 90%;
  max-width: 500px;
  background: rgb(255, 255, 255);
  border-radius: 12px;
  overflow: hidden;
  transform: translateY(20px);
  transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 10px 30px rgba(0,0,0,0.15), 
              0 0 0 1px rgba(255,255,255,0.1) inset;
}

.announcement-modal.active .announcement-card {
  transform: translateY(0);
}

.announcement-header {
  padding: 20px;
  display: flex;
  align-items: center;
  position: relative;
  border-bottom: 1px solid #000000;
}

.announcement-header h3 {
  margin: 0;
  flex-grow: 1;
  font-size: 1.3rem;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.8rem;
  cursor: pointer;
  color: #666;
  transition: color 0.2s;
  padding: 0 10px;
}

.close-btn:hover {
  color: #333;
}

.announcement-body {
  padding: 25px;
  line-height: 1.6;
  font-size: 1rem;
}

.announcement-footer {
  padding: 15px;
  text-align: right;
  border-top: 1px solid #080808;
}

.ack-btn {
  background: #4a69bd;
  color: rgb(255, 255, 255);
  border: none;
  padding: 8px 20px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 500;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.ack-btn:hover {
  background: #3a59ad;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.announcement-normal {
  border-top: 4px solid #4CAF50;
}

.announcement-warning {
  border-top: 4px solid #FFC107;
}

.announcement-urgent {
  border-top: 4px solid #F44336;
}

.announcement-normal #announcementIcon {
  color: #4CAF50;
  margin-right: 10px;
  font-size: 1.5rem;
}

.announcement-warning #announcementIcon {
  color: #FFC107;
  margin-right: 10px;
  font-size: 1.5rem;
}

.announcement-urgent #announcementIcon {
  color: #F44336;
  margin-right: 10px;
  font-size: 1.5rem;
}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-cloud-upload-alt"></i> Upload Đa dạng Định dạng</h1>
      <p>Upload nhiều loại file: ảnh, video, âm thanh, nén và các định dạng khác</p>
    </header>

    <div id="announcementModal" class="announcement-modal">
  <div class="announcement-card">
    <div class="announcement-header">
      <span id="announcementIcon"></span>
      <h3 id="announcementTitleDisplay"></h3>
      <button class="close-btn" onclick="closeAnnouncement()">×</button>
    </div>
    <div class="announcement-body">
      <p id="announcementContentDisplay"></p>
    </div>
    <div class="announcement-footer">
      <button class="ack-btn" onclick="closeAnnouncement()">Đã hiểu</button>
    </div>
  </div>
</div>

    <div class="card">
      <div class="tab-container">
        <div class="tab active" data-tab="upload">Upload Files</div>
        <div class="tab" data-tab="convert">Convert Links</div>
      </div>
      
      <div class="tab-content active" id="upload-tab">
        <div class="card-header">
          <i class="fas fa-upload"></i>
          <h2>Upload Nhiều File</h2>
        </div>
        
        <div class="card-body">
          <div class="upload-area" id="dropZone">
            <i class="fas fa-cloud-upload-alt"></i>
            <h3>Kéo và thả file vào đây</h3>
            <p>Hỗ trợ nhiều định dạng file </p>
            
            <div class="file-formats">
              <span class="format-tag">JPG</span>
              <span class="format-tag">PNG</span>
              <span class="format-tag">GIF</span>
              <span class="format-tag">MP4</span>
              <span class="format-tag">WEBM</span>
              <span class="format-tag">ZIP</span>
              <span class="format-tag">RAR</span>
              <span class="format-tag">MOV</span>
              <span class="format-tag">MP3</span>
              <span class="format-tag">PDF</span>
              <span class="format-tag">DOCX</span>
              <span class="format-tag">XLSX</span>
            </div>
            
            <button class="btn" id="selectFiles">
              <i class="fas fa-folder-open"></i> Chọn Files
            </button>
          </div>
          
          <input type="file" id="fileInput" multiple style="display: none">
          
          <div class="file-list" id="fileList"></div>
          
          <div class="actions">
            <button class="btn btn-secondary" id="clearFiles">
              <i class="fas fa-trash"></i> Xóa Tất Cả
            </button>
            <button class="btn btn-success" id="uploadFiles">
              <i class="fas fa-upload"></i> Upload Tất Cả
            </button>
          </div>
          
          <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
          </div>
          
          <div class="status" id="uploadStatus"></div>
          
          <div class="result-container">
            <div class="result-area" id="uploadResult"></div>
            <div class="result-actions">
              <button class="copy-btn" id="copyUploadResult">
                <i class="fas fa-copy"></i> Copy
              </button>
              <button class="download-btn" id="downloadUploadJson">
                <i class="fas fa-download"></i> JSON
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="tab-content" id="convert-tab">
        <div class="card-header">
          <i class="fas fa-link"></i>
          <h2>Convert Nhiều Links</h2>
        </div>
        
        <div class="card-body">
          <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> Hướng dẫn:</h3>
            <ul>
              <li>Dán nhiều link media cần convert (mỗi link trên một dòng)</li>
              <li>Hỗ trợ link ảnh, video, âm thanh và các file khác</li>
              <li>Kết quả sẽ trả về các link mới (mỗi link trên một dòng)</li>
            </ul>
          </div>
          
          <textarea id="linksInput" placeholder="Dán các link media tại đây, mỗi link trên một dòng..."></textarea>
          
          <div class="actions">
            <button class="btn btn-secondary" id="clearLinks">
              <i class="fas fa-eraser"></i> Xóa
            </button>
            <button class="btn btn-success" id="convertLinks">
              <i class="fas fa-exchange-alt"></i> Convert Links
            </button>
          </div>
          
          <div class="status" id="convertStatus"></div>
          
          <div class="result-container">
            <div class="result-area" id="convertResult"></div>
            <div class="result-actions">
              <button class="copy-btn" id="copyConvertResult">
                <i class="fas fa-copy"></i> Copy
              </button>
              <button class="download-btn" id="downloadConvertJson">
                <i class="fas fa-download"></i> JSON
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
     function showAnnouncement(announcement) {
  if (!announcement.active) return;
  
  const modal = document.getElementById('announcementModal');
  const card = document.querySelector('.announcement-card');
  
  card.classList.remove('announcement-normal', 'announcement-warning', 'announcement-urgent');
  
  document.getElementById('announcementTitleDisplay').textContent = announcement.title;
  document.getElementById('announcementContentDisplay').textContent = announcement.content;
  
  let icon = '';
  switch(announcement.level) {
    case 'warning':
      card.classList.add('announcement-warning');
      icon = '<i class="fas fa-exclamation-triangle"></i>';
      break;
    case 'urgent':
      card.classList.add('announcement-urgent');
      icon = '<i class="fas fa-exclamation-circle"></i>';
      break;
    default:
      card.classList.add('announcement-normal');
      icon = '<i class="fas fa-info-circle"></i>';
  }
  
  document.getElementById('announcementIcon').innerHTML = icon;
  
  modal.classList.add('active');
}

function closeAnnouncement() {
  const modal = document.getElementById('announcementModal');
  modal.classList.remove('active');
}

document.addEventListener('DOMContentLoaded', async function() {
  try {
    const response = await fetch('/api/announcement');
    const announcement = await response.json();
    showAnnouncement(announcement);
  } catch (err) {
    console.error('Error loading announcement:', err);
  }
});
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const fileList = document.getElementById('fileList');
    const selectFilesBtn = document.getElementById('selectFiles');
    const clearFilesBtn = document.getElementById('clearFiles');
    const uploadFilesBtn = document.getElementById('uploadFiles');
    const progressBar = document.getElementById('progressBar');
    const uploadStatus = document.getElementById('uploadStatus');
    const uploadResult = document.getElementById('uploadResult');
    const linksInput = document.getElementById('linksInput');
    const clearLinksBtn = document.getElementById('clearLinks');
    const convertLinksBtn = document.getElementById('convertLinks');
    const convertStatus = document.getElementById('convertStatus');
    const convertResult = document.getElementById('convertResult');
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const copyUploadResultBtn = document.getElementById('copyUploadResult');
    const copyConvertResultBtn = document.getElementById('copyConvertResult');
    const downloadUploadJsonBtn = document.getElementById('downloadUploadJson');
    const downloadConvertJsonBtn = document.getElementById('downloadConvertJson');
    
    let files = [];
    
    const fileTypeIcons = {
      'image/jpeg': 'fa-file-image',
      'image/png': 'fa-file-image',
      'image/gif': 'fa-file-image',
      'image/webp': 'fa-file-image',
      'image/svg+xml': 'fa-file-image',
      'image/bmp': 'fa-file-image',
      
      'video/mp4': 'fa-file-video',
      'video/webm': 'fa-file-video',
      'video/ogg': 'fa-file-video',
      'video/quicktime': 'fa-file-video',
      'video/x-msvideo': 'fa-file-video',
      
      'audio/mpeg': 'fa-file-audio',
      'audio/wav': 'fa-file-audio',
      'audio/ogg': 'fa-file-audio',
      'audio/midi': 'fa-file-audio',
      'audio/x-wav': 'fa-file-audio',
      
      'application/zip': 'fa-file-archive',
      'application/x-rar-compressed': 'fa-file-archive',
      'application/x-7z-compressed': 'fa-file-archive',
      'application/x-tar': 'fa-file-archive',
      'application/gzip': 'fa-file-archive',
      
      'application/pdf': 'fa-file-pdf',
      'application/msword': 'fa-file-word',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'fa-file-word',
      'application/vnd.ms-excel': 'fa-file-excel',
      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'fa-file-excel',
      'application/vnd.ms-powerpoint': 'fa-file-powerpoint',
      'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'fa-file-powerpoint',
      'text/plain': 'fa-file-alt',
      'text/csv': 'fa-file-csv',
      
      'default': 'fa-file'
    };
    
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabName = tab.getAttribute('data-tab');
        
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        tabContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === `${tabName}-tab`) {
            content.classList.add('active');
          }
        });
      });
    });
    
    selectFilesBtn.addEventListener('click', () => {
      fileInput.click();
    });
    
    fileInput.addEventListener('change', (e) => {
      handleFiles(e.target.files);
      fileInput.value = '';
    });
    
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, preventDefaults, false);
    });
    
    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }
    
    ['dragenter', 'dragover'].forEach(eventName => {
      dropZone.addEventListener(eventName, () => {
        dropZone.classList.add('dragover');
      }, false);
    });
    
    ['dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, () => {
        dropZone.classList.remove('dragover');
      }, false);
    });
    
    dropZone.addEventListener('drop', (e) => {
      const dt = e.dataTransfer;
      handleFiles(dt.files);
    }, false);
    
    function handleFiles(newFiles) {
      for (let i = 0; i < newFiles.length; i++) {
        const file = newFiles[i];
        
        if (file.size > 100 * 1024 * 1024) {
          alert(`File ${file.name} vượt quá 100MB. Vui lòng chọn file nhỏ hơn.`);
          continue;
        }
        
        files.push(file);
      }
      
      renderFileList();
    }
    
    function renderFileList() {
      fileList.innerHTML = '';
      
      if (files.length === 0) {
        fileList.innerHTML = '<p class="no-files">Chưa có file nào được chọn</p>';
        return;
      }
      
      files.forEach((file, index) => {
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        
        let thumbContent = '';
        let fileType = file.type || getFileTypeFromExtension(file.name);
        
        if (fileType.match('image.*')) {
          thumbContent = `<img src="${URL.createObjectURL(file)}" alt="${file.name}">`;
        } else if (fileType.match('video.*')) {
          thumbContent = `<video src="${URL.createObjectURL(file)}"></video>`;
        } else {
          const iconClass = fileTypeIcons[fileType] || fileTypeIcons['default'];
          thumbContent = `<i class="fas ${iconClass}" style="font-size: 3rem; color: #4a69bd;"></i>`;
        }
        
        const fileTypeDisplay = fileType.split('/')[1] || fileType.split('/')[0] || "File";
        
        fileItem.innerHTML = `
          <div class="file-thumb">
            ${thumbContent}
            <div class="remove-file" data-index="${index}">
              <i class="fas fa-times"></i>
            </div>
          </div>
          <div class="file-info">
            <div class="file-name">${file.name}</div>
            <div class="file-size">${formatFileSize(file.size)}</div>
            <div class="file-type">${fileTypeDisplay.toUpperCase()}</div>
          </div>
        `;
        
        fileList.appendChild(fileItem);
      });
      
      document.querySelectorAll('.remove-file').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const index = parseInt(btn.getAttribute('data-index'));
          files.splice(index, 1);
          renderFileList();
        });
      });
    }
    
    function getFileTypeFromExtension(filename) {
      const extension = filename.split('.').pop().toLowerCase();
      
      const extensionTypes = {
        'jpg': 'image/jpeg',
        'jpeg': 'image/jpeg',
        'png': 'image/png',
        'gif': 'image/gif',
        'svg': 'image/svg+xml',
        'bmp': 'image/bmp',
        'webp': 'image/webp',
        
        'mp4': 'video/mp4',
        'webm': 'video/webm',
        'ogg': 'video/ogg',
        'mov': 'video/quicktime',
        'avi': 'video/x-msvideo',
        'wmv': 'video/x-ms-wmv',
        'flv': 'video/x-flv',
        
        'mp3': 'audio/mpeg',
        'wav': 'audio/wav',
        'ogg': 'audio/ogg',
        'flac': 'audio/flac',
        'm4a': 'audio/mp4',
        'aac': 'audio/aac',
        'wma': 'audio/x-ms-wma',
        
        'zip': 'application/zip',
        'rar': 'application/x-rar-compressed',
        '7z': 'application/x-7z-compressed',
        'tar': 'application/x-tar',
        'gz': 'application/gzip',
        
        'pdf': 'application/pdf',
        'doc': 'application/msword',
        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'xls': 'application/vnd.ms-excel',
        'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
        'ppt': 'application/vnd.ms-powerpoint',
        'pptx': 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
        'txt': 'text/plain',
        'csv': 'text/csv'
      };
      
      return extensionTypes[extension] || 'application/octet-stream';
    }
    
    clearFilesBtn.addEventListener('click', () => {
      files = [];
      renderFileList();
      uploadStatus.textContent = '';
      uploadResult.textContent = '';
      progressBar.style.width = '0%';
    });
    
    uploadFilesBtn.addEventListener('click', async () => {
      if (files.length === 0) {
        uploadStatus.textContent = 'Vui lòng chọn ít nhất một file để upload';
        uploadStatus.style.color = '#ef4444';
        return;
      }
      
      uploadStatus.textContent = 'Đang upload...';
      uploadStatus.style.color = '#4a69bd';
      progressBar.style.width = '0%';
      uploadResult.textContent = '';
      
      try {
        const formData = new FormData();
        files.forEach(file => {
          formData.append('files', file);
        });
        
        const response = await fetch('/upload', {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
          uploadStatus.textContent = `Upload thành công ${result.urls.length} file!`;
          progressBar.style.width = '100%';
          
          let resultText = '';
          result.urls.forEach(url => {
            resultText += `${url}\n`;
          });
          uploadResult.textContent = resultText;
        } else {
          uploadStatus.textContent = `Lỗi: ${result.error || 'Upload không thành công'}`;
          uploadStatus.style.color = '#ef4444';
        }
      } catch (error) {
        console.error('Upload error:', error);
        uploadStatus.textContent = 'Lỗi khi upload. Vui lòng thử lại.';
        uploadStatus.style.color = '#ef4444';
      }
    });
    
    clearLinksBtn.addEventListener('click', () => {
      linksInput.value = '';
      convertStatus.textContent = '';
      convertResult.textContent = '';
    });
    
    convertLinksBtn.addEventListener('click', async () => {
      const linksText = linksInput.value.trim();
      if (!linksText) {
        convertStatus.textContent = 'Vui lòng nhập ít nhất một link';
        convertStatus.style.color = '#ef4444';
        return;
      }
      
      const links = linksText.split('\n')
        .map(link => link.trim())
        .filter(link => link.length > 0);
      
      if (links.length === 0) {
        convertStatus.textContent = 'Không tìm thấy link hợp lệ';
        convertStatus.style.color = '#ef4444';
        return;
      }
      
      convertStatus.textContent = `Đang chuyển đổi ${links.length} link...`;
      convertStatus.style.color = '#4a69bd';
      convertResult.textContent = '';
      
      try {
        const response = await fetch('/convert', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ urls: links })
        });
        
        const result = await response.json();
        
        if (result.success) {
          convertStatus.textContent = `Chuyển đổi thành công ${result.results.filter(r => r.success).length}/${links.length} link`;
          
          let resultText = '';
          result.results.forEach(item => {
            if (item.success) {
              resultText += `${item.convertedUrl}\n`;
            } else {
              resultText += `# Lỗi: ${item.originalUrl} - ${item.error}\n`;
            }
          });
          convertResult.textContent = resultText;
        } else {
          convertStatus.textContent = `Lỗi: ${result.error || 'Chuyển đổi không thành công'}`;
          convertStatus.style.color = '#ef4444';
        }
      } catch (error) {
        console.error('Convert error:', error);
        convertStatus.textContent = 'Lỗi khi chuyển đổi. Vui lòng thử lại.';
        convertStatus.style.color = '#ef4444';
      }
    });
    
    copyUploadResultBtn.addEventListener('click', () => {
      copyToClipboard(uploadResult);
      showCopyFeedback(copyUploadResultBtn, 'Copied!');
    });
    
    copyConvertResultBtn.addEventListener('click', () => {
      copyToClipboard(convertResult);
      showCopyFeedback(copyConvertResultBtn, 'Copied!');
    });
    
    downloadUploadJsonBtn.addEventListener('click', () => {
      const urls = extractUrlsFromText(uploadResult.textContent);
      if (urls.length > 0) {
        downloadJson(urls, 'uploaded_links.json');
        showCopyFeedback(downloadUploadJsonBtn, 'Downloaded!');
      } else {
        alert('Không có dữ liệu để tải về');
      }
    });
    
    downloadConvertJsonBtn.addEventListener('click', () => {
      const urls = extractUrlsFromText(convertResult.textContent);
      if (urls.length > 0) {
        downloadJson(urls, 'converted_links.json');
        showCopyFeedback(downloadConvertJsonBtn, 'Downloaded!');
      } else {
        alert('Không có dữ liệu để tải về');
      }
    });
    
    function extractUrlsFromText(text) {
      return text
        .split('\n')
        .map(line => line.trim())
        .filter(line => line && !line.startsWith('#'));
    }
    
    function copyToClipboard(element) {
      const text = element.textContent;
      navigator.clipboard.writeText(text.trim());
    }
    
    function downloadJson(urls, filename) {
      const jsonData = JSON.stringify(urls, null, 2);
      
      const blob = new Blob([jsonData], { type: 'application/json' });
      
      const url = URL.createObjectURL(blob);
      
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 100);
    }
    
    function showCopyFeedback(button, message) {
      const originalText = button.innerHTML;
      button.innerHTML = `<i class="fas fa-check"></i> ${message}`;
      button.style.background = '#10b981';
      button.style.color = 'white';
      
      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.background = 'rgba(255,255,255,0.9)';
        button.style.color = '#4a69bd';
      }, 2000);
    }
    
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    renderFileList();

  
  </script>
 <footer style="
  background: linear-gradient(135deg, #2c3e50, #1a1a2e);
  text-align: center;
  color: white;
  padding: 30px 20px;
  margin-top: 70px;
  font-size: 0.95rem;
  border-radius: 12px 12px 0 0;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
">
  <p style="margin: 0; padding-bottom: 10px; font-size: 1.1rem;">
    © 2025 <strong style="color: #4ecdc4; font-weight: 600;">ThuyLinh</strong>. All rights reserved
  </p>
  
  <div style="
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px 0;
    flex-wrap: wrap;
  ">
    <a href="https://www.facebook.com/de.red.735?mibextid=JRoKGi" 
       style="
         color: white;
         text-decoration: none;
         padding: 8px 15px;
         border-radius: 20px;
         background: rgba(255, 255, 255, 0.1);
         transition: all 0.3s ease;
         display: inline-flex;
         align-items: center;
         gap: 5px;
       "
       onmouseover="this.style.background='rgba(59, 89, 152, 0.7)'; this.style.transform='translateY(-2px)'"
       onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.transform='translateY(0)'">
      <i class="fab fa-facebook-f"></i> Admin
    </a>
    
    <a href="ungho.html" 
       style="
         color: white;
         text-decoration: none;
         padding: 8px 15px;
         border-radius: 20px;
         background: rgba(255, 255, 255, 0.1);
         transition: all 0.3s ease;
         display: inline-flex;
         align-items: center;
         gap: 5px;
       "
       onmouseover="this.style.background='rgba(231, 76, 60, 0.7)'; this.style.transform='translateY(-2px)'"
       onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.transform='translateY(0)'">
      <i class="fas fa-heart"></i> Ủng Hộ Tôi
    </a>
  </div>
  <a href="api.html" 
       style="
         color: white;
         text-decoration: none;
         padding: 8px 15px;
         border-radius: 20px;
         background: rgba(255, 255, 255, 0.1);
         transition: all 0.3s ease;
         display: inline-flex;
         align-items: center;
         gap: 5px;
       "
       onmouseover="this.style.background='rgba(231, 76, 60, 0.7)'; this.style.transform='translateY(-2px)'"
       onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.transform='translateY(0)'">
      <i class="fas fa-heart"></i> API DOCS
    </a>
  </div>
  
  <div style="
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
  ">
    Made with ❤️ Thùy Linh
  </div>
</footer>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</body>
</html>
